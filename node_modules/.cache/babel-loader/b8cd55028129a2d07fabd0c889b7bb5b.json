{"ast":null,"code":"var _jsxFileName = \"/Users/OviB/Desktop/kite-app/src/components/Login/Login.js\";\nimport { Box, Button, Container, Grid, Paper, TextField, CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport classNames from 'classnames';\nimport { pathOr } from 'ramda';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'react-toastify';\nimport { useAuth } from '../../auth/AuthProvider';\nimport { KiteLogo } from '../../assets/svgAssets';\nimport PersonRoundedIcon from '@material-ui/icons/PersonRounded';\nimport LockRoundedIcon from '@material-ui/icons/LockRounded';\nimport { environment } from '../../environments/environment';\nimport './Login.scss';\n\nconst Login = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    onSignIn\n  } = useAuth();\n  const {\n    register,\n    handleSubmit,\n    errors,\n    formState\n  } = useForm({\n    mode: 'onChange',\n    reValidateMode: 'onBlur'\n  });\n  console.log(errors);\n  const fieldInfo = [{\n    testId: 'username',\n    type: 'text',\n    name: 'username',\n    label: 'Email',\n    icon: /*#__PURE__*/React.createElement(PersonRoundedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }\n    }),\n    error: pathOr('', ['username', 'message'], errors)\n  }, {\n    testId: 'password',\n    type: 'password',\n    name: 'password',\n    label: 'Password',\n    icon: /*#__PURE__*/React.createElement(LockRoundedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }),\n    error: pathOr('', ['password', 'message'], errors)\n  }];\n\n  const onSubmit = data => {\n    setIsLoading(true);\n    axios.post(`${environment.apiPath}/login`, data).then(response => {\n      onSignIn(response.data.userId);\n      setIsLoading(false);\n    }).catch(error => {\n      if (error.response) {\n        toast(error.response.data.error.message);\n        setIsLoading(false);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"login text-dark\",\n    maxWidth: \"false\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minHeight: \"100vh\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    alignItems: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 10,\n    sm: 8,\n    lg: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: \"login-card pt-4 pr-5 pb-5 pl-5 text-dark\",\n    elevation: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(KiteLogo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, fieldInfo.map(el => /*#__PURE__*/React.createElement(Grid, {\n    key: el.name,\n    container: true,\n    alignItems: \"flex-end\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    item: true,\n    wrap: \"nowrap\",\n    alignItems: \"flex-end\",\n    className: \"w-75\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    className: \"pr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 23\n    }\n  }, el.icon), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"standard\",\n    type: el.type,\n    name: el.name,\n    inputRef: register({\n      required: `${el.name} is required`\n    }),\n    label: el.label,\n    InputLabelProps: {\n      className: 'text-light'\n    },\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error text-danger pt-3 w-100 d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, el.error))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: \"mt-5\",\n    item: true,\n    wrap: \"nowrap\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: classNames('button mt-5 w-50', {\n      'bg-primary': formState.isValid\n    }),\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !formState.isValid || isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-100 d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  })) : \"Login\"))))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/OviB/Desktop/kite-app/src/components/Login/Login.js"],"names":["Box","Button","Container","Grid","Paper","TextField","CircularProgress","axios","classNames","pathOr","React","useState","useForm","toast","useAuth","KiteLogo","PersonRoundedIcon","LockRoundedIcon","environment","Login","isLoading","setIsLoading","onSignIn","register","handleSubmit","errors","formState","mode","reValidateMode","console","log","fieldInfo","testId","type","name","label","icon","error","onSubmit","data","post","apiPath","then","response","userId","catch","message","map","el","required","className","isValid"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Container,\n  Grid,\n  Paper,\n  TextField,\n  CircularProgress,\n} from '@material-ui/core';\nimport axios from 'axios';\nimport classNames from 'classnames';\nimport { pathOr } from 'ramda';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { toast } from 'react-toastify';\nimport { useAuth } from '../../auth/AuthProvider';\nimport { KiteLogo } from '../../assets/svgAssets';\nimport PersonRoundedIcon from '@material-ui/icons/PersonRounded';\nimport LockRoundedIcon from '@material-ui/icons/LockRounded';\nimport { environment } from '../../environments/environment';\nimport './Login.scss';\n\nconst Login = () => {\n  const [ isLoading, setIsLoading ] = useState(false);\n  const { onSignIn } = useAuth();\n  const { register, handleSubmit, errors, formState } = useForm({\n    mode: 'onChange',\n    reValidateMode: 'onBlur',\n  });\n\n  console.log(errors);\n\n  const fieldInfo = [\n    {\n      testId: 'username',\n      type: 'text',\n      name: 'username',\n      label: 'Email',\n      icon: <PersonRoundedIcon/>,\n      error: pathOr('', ['username', 'message'], errors)\n    },\n    {\n      testId: 'password',\n      type: 'password',\n      name: 'password',\n      label: 'Password',\n      icon: <LockRoundedIcon/>,\n      error: pathOr('', ['password', 'message'], errors)\n    }\n  ];\n\n  const onSubmit = (data) => {\n    setIsLoading(true);\n\n    axios\n      .post(`${environment.apiPath}/login`, data)\n      .then((response) => {\n        onSignIn(response.data.userId);\n        setIsLoading(false);\n      })\n      .catch((error) => {\n        if (error.response) {\n          toast(error.response.data.error.message);\n          setIsLoading(false);\n        }\n      });\n  };\n\n  return (\n    <Container className=\"login text-dark\" maxWidth=\"false\">\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        minHeight=\"100vh\"\n      >\n        <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n          <Grid item xs={10} sm={8} lg={4}>\n            <Paper className=\"login-card pt-4 pr-5 pb-5 pl-5 text-dark\" elevation={5}>\n              <div className=\"d-flex justify-content-center w-100\">\n                <KiteLogo />\n              </div>\n              <form onSubmit={handleSubmit(onSubmit)}>\n                {fieldInfo.map((el) => (\n                  <Grid key={el.name} container alignItems=\"flex-end\" justify=\"center\">\n                    <Grid container item wrap=\"nowrap\" alignItems=\"flex-end\" className=\"w-75\">\n                      <Grid item className=\"pr-2\">\n                        {el.icon}\n                      </Grid>\n                      <Grid item xs={12} className=\"mt-5\">\n                        <TextField\n                          variant=\"standard\"\n                          type={el.type}\n                          name={el.name}\n                          inputRef={ register({\n                            required: `${el.name} is required`})\n                          }\n                          label={el.label}\n                          InputLabelProps={{\n                            className: 'text-light'\n                          }}\n                          fullWidth\n                        />\n                      </Grid>\n                    </Grid>\n                    <div\n                      className=\"error text-danger pt-3 w-100 d-flex justify-content-center\"\n                    >\n                      {el.error}\n                    </div>\n                  </Grid>\n                ))}\n                <Grid container className=\"mt-5\" item wrap=\"nowrap\" justify=\"center\">\n                  <Button\n                    className={classNames('button mt-5 w-50', {\n                      'bg-primary': formState.isValid\n                    })}\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={ !formState.isValid || isLoading }\n                  >\n                    { isLoading\n                        ? <div className=\"w-100 d-flex justify-content-center\">\n                            <CircularProgress color=\"inherit\" size={20} />\n                          </div>\n                        : \"Login\"\n                    }\n                  </Button>\n                </Grid>\n              </form>\n            </Paper>\n          </Grid>\n        </Grid>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}